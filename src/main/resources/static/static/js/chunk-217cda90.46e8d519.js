(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-217cda90"],{"1f50":function(t,e,o){t.exports=o.p+"static/img/login-img1.f12e4a4f.png"},"28d3":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"s-canvas"},[o("canvas",{attrs:{id:"s-canvas",width:t.contentWidth,height:t.contentHeight},on:{click:t.onChangeCode}})])},i=[],r=(o("cb29"),o("a9e3"),{name:"SIdentify",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:18},fontSizeMax:{type:Number,default:28},backgroundColorMin:{type:Number,default:200},backgroundColorMax:{type:Number,default:220},dotColorMin:{type:Number,default:60},dotColorMax:{type:Number,default:120},contentWidth:{type:Number,default:100},contentHeight:{type:Number,default:30}},methods:{randomNum:function(t,e){return Math.floor(Math.random()*(e-t)+t)},randomColor:function(t,e){var o=this.randomNum(t,e),n=this.randomNum(t,e),i=this.randomNum(t,e);return"rgb("+o+","+n+","+i+")"},drawPic:function(){var t=document.getElementById("s-canvas"),e=t.getContext("2d");e.textBaseline="bottom",e.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),e.fillRect(0,0,this.contentWidth,this.contentHeight);for(var o=0;o<this.identifyCode.length;o++)this.drawText(e,this.identifyCode[o],o);this.drawLine(e),this.drawDot(e)},drawText:function(t,e,o){t.fillStyle=this.randomColor(50,160),t.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";var n=(o+1)*(this.contentWidth/(this.identifyCode.length+1)),i=this.randomNum(this.fontSizeMax,this.contentHeight-5),r=this.randomNum(-30,30);t.translate(n,i),t.rotate(r*Math.PI/180),t.fillText(e,0,0),t.rotate(-r*Math.PI/180),t.translate(-n,-i)},drawLine:function(t){for(var e=0;e<4;e++)t.strokeStyle=this.randomColor(100,200),t.beginPath(),t.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),t.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),t.stroke()},drawDot:function(t){for(var e=0;e<30;e++)t.fillStyle=this.randomColor(0,255),t.beginPath(),t.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),t.fill()},getRandomNum:function(t){for(var e="",o=0;o<t;o++)e+=Math.floor(10*Math.random());return e},onChangeCode:function(){this.$emit("onChangeCode")}},watch:{identifyCode:function(){this.drawPic()}},mounted:function(){this.drawPic()}}),a=r,d=(o("f0ac"),o("2877")),s=Object(d["a"])(a,n,i,!1,null,"36fee7a4",null);e["a"]=s.exports},"68cc":function(t,e,o){"use strict";var n=o("b092"),i=o.n(n);i.a},"81d5":function(t,e,o){"use strict";var n=o("7b0b"),i=o("23cb"),r=o("50c4");t.exports=function(t){var e=n(this),o=r(e.length),a=arguments.length,d=i(a>1?arguments[1]:void 0,o),s=a>2?arguments[2]:void 0,c=void 0===s?o:i(s,o);while(c>d)e[d++]=t;return e}},"8c86":function(t,e,o){},"8cd8":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"changePw-container flex-rcenc"},[o("div",{staticClass:"left-box"},[o("div",{staticClass:"form-box"},[o("div",{staticClass:"tip-box"},[t._v("修改密码")]),o("el-form",{ref:"formPw",attrs:{model:t.formPw,rules:t.rules,"label-width":"0px"}},[o("el-form-item",{attrs:{label:"",prop:"pwdOne"}},[o("el-input",{attrs:{placeholder:"新密码(至少6位数字字母)",clearable:""},model:{value:t.formPw.pwdOne,callback:function(e){t.$set(t.formPw,"pwdOne",e)},expression:"formPw.pwdOne"}})],1),o("el-form-item",{attrs:{label:"",prop:"pwdTwo"}},[o("el-input",{attrs:{placeholder:"请确认密码",clearable:""},model:{value:t.formPw.pwdTwo,callback:function(e){t.$set(t.formPw,"pwdTwo",e)},expression:"formPw.pwdTwo"}})],1),o("el-form-item",{staticClass:"form-code-box",attrs:{label:"",prop:"code"}},[o("el-input",{attrs:{placeholder:"请输入验证码",clearable:""},model:{value:t.formPw.code,callback:function(e){t.$set(t.formPw,"code",e)},expression:"formPw.code"}}),o("identify-code",{staticClass:"identify-code-box",attrs:{identifyCode:t.identifyCode},on:{onChangeCode:t.onChangeCode}})],1)],1),o("div",{staticClass:"btn-box"},[o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提交")])],1)],1)]),t._m(0)])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"right-box"},[n("img",{staticClass:"login-img1",attrs:{src:o("1f50"),alt:""}})])}],r=(o("b0c0"),o("4360")),a=o("28d3"),d=o("ed08"),s=o("5f87"),c=o("61f7"),l=o("c24f"),f={components:{IdentifyCode:a["a"]},data:function(){var t=this,e=function(e,o,n){return o?o!==t.identifyCode?n(new Error("验证码有误")):n():n(new Error("请输入验证码"))},o=function(e,o,n){return o?o!==t.formPw.pwdOne?n(new Error("两次密码输入不一致")):n():n(new Error("请确认密码"))};return{identifyCode:"",formPw:{pwdOne:"",pwdTwo:"",code:""},rules:{pwdOne:[{required:!0,validator:c["f"],trigger:"blur"}],pwdTwo:[{required:!0,validator:o,trigger:"blur"}],code:[{required:!0,validator:e,trigger:"blur"}]}}},created:function(){this.initCode()},methods:{initCode:function(){this.identifyCode=Object(d["d"])(4)},onChangeCode:function(t){this.initCode()},onSubmit:function(){var t=this;this.$refs["formPw"].validate((function(e){if(!e)return!1;var o=Object(s["b"])(),n=o.name;console.log("name",n),t.formPw.name=n,delete t.formPw.code,Object(l["f"])(t.formPw).then((function(e){console.log(e),t.$message({message:"修改成功，请重新登录！",type:"success",showClose:!0}),setTimeout((function(){r["a"].dispatch("user/resetToken").then((function(){location.reload()}))}),1500)})).catch((function(t){console.log(t)}))}))}}},u=f,h=(o("68cc"),o("2877")),m=Object(h["a"])(u,n,i,!1,null,"0953ed35",null);e["default"]=m.exports},b092:function(t,e,o){},cb29:function(t,e,o){var n=o("23e7"),i=o("81d5"),r=o("44d2");n({target:"Array",proto:!0},{fill:i}),r("fill")},f0ac:function(t,e,o){"use strict";var n=o("8c86"),i=o.n(n);i.a}}]);